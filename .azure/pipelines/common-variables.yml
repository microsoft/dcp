#
# Common build pipeline variables
#

variables:
  TeamName: 'DCP'
  GoVersion: '1.22.1'
  MicrosoftGoVersion: '1.22.1-2'
  BuildContainerName: dcp-build
  MaestroApiEndpoint: https://maestro-prod.westus2.cloudapp.azure.com
  ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/main') }}:
    environment: 'dcp-development'
    deployFeed: '0bdbc590-a062-4c3f-b0f6-9383f67865ee/332dbfb2-0cfc-4ab0-9528-51720db68f63'
    feedName: 'dcp-development'
    isReleaseOnlyPackageVersion: false
    shouldDeploy: true
  ${{ elseif startsWith(variables['Build.SourceBranch'], 'refs/heads/release/') }}:
    environment: 'dcp-staging'
    deployFeed: '0bdbc590-a062-4c3f-b0f6-9383f67865ee/0d6e3604-e79a-4d86-8d1a-4689e01dd01e'
    feedName: 'dcp-staging'
    isReleaseOnlyPackageVersion: false
    shouldDeploy: true
  ${{ elseif and(startsWith(variables['Build.SourceBranch'], 'refs/tags/'), startsWith(variables['Build.SourceBranchName'], 'v'), not(contains(variables['Build.SourceBranchName'], '-'))) }}:
    environment: 'dcp-production'
    deployFeed: '0bdbc590-a062-4c3f-b0f6-9383f67865ee/3686248d-9f4d-4640-8796-f1fab99dcc2d'
    feedName: 'dcp'
    isReleaseOnlyPackageVersion: true
    shouldDeploy: true
  ${{ else }}:
    environment: 'dcp-development'