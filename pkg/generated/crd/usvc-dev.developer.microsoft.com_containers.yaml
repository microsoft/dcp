---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: containers.usvc-dev.developer.microsoft.com
spec:
  group: usvc-dev.developer.microsoft.com
  names:
    kind: Container
    listKind: ContainerList
    plural: containers
    singular: container
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: Container resource represents a container run using an orchestrator
          such as Docker or Podman
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ContainerSpec defines the desired state of a Container
            properties:
              args:
                description: Arguments to pass to the command
                items:
                  type: string
                type: array
              command:
                description: Command to run in the container
                type: string
              containerName:
                description: Optional container name
                type: string
              env:
                description: Environment settings
                items:
                  description: EnvVar represents an environment variable present in
                    a Container or Executable.
                  properties:
                    name:
                      description: Name of the environment variable
                      type: string
                    value:
                      description: Value of the environment variable. Defaults to
                        "" (empty string).
                      type: string
                  required:
                  - name
                  type: object
                type: array
              envFiles:
                description: Environment files to use to populate Container environment
                  during startup.
                items:
                  type: string
                type: array
              image:
                description: Container image
                type: string
              networks:
                description: |-
                  ContaineNetworks resources the container should be attached to. If omitted or nil, the container will
                  be attached to the default network and the controller will not manage network connections.
                items:
                  properties:
                    aliases:
                      description: Aliases of the container on the network
                      items:
                        type: string
                      type: array
                      x-kubernetes-list-type: atomic
                    name:
                      description: Name of the network to connect to
                      type: string
                  required:
                  - name
                  type: object
                type: array
                x-kubernetes-list-type: atomic
              persistent:
                description: Should this container be created and persisted between
                  DCP runs?
                type: boolean
              ports:
                description: Exposed ports
                items:
                  properties:
                    containerPort:
                      description: 'Required: This must be a valid port number, 0
                        < x < 65536.'
                      format: int32
                      maximum: 65535
                      minimum: 0
                      type: integer
                    hostIP:
                      description: 'Optional: What host IP to bind the external port
                        to.'
                      type: string
                    hostPort:
                      description: 'Optional: If specified, this must be a valid port
                        number, 0 < x < 65536.'
                      format: int32
                      maximum: 65535
                      minimum: 0
                      type: integer
                    protocol:
                      description: The port to be used, defaults to TCP
                      type: string
                  required:
                  - containerPort
                  type: object
                type: array
              restartPolicy:
                description: Container restart policy
                type: string
              stop:
                default: false
                description: Should the controller attempt to stop the container?
                type: boolean
              volumeMounts:
                description: Consumed volume information
                items:
                  properties:
                    readOnly:
                      description: True if the mounted file system is supposed to
                        be read-only
                      type: boolean
                    source:
                      description: |-
                        Bind mounts: the host directory to mount
                        Volume mounts: name of the volume to mount
                      type: string
                    target:
                      description: The path within the container that the mount will
                        use
                      type: string
                    type:
                      type: string
                  required:
                  - source
                  - target
                  - type
                  type: object
                type: array
            required:
            - image
            type: object
          status:
            description: ContainerStatus describes the status of a Container
            properties:
              containerId:
                description: ID of the Container (if an attempt to start the Container
                  was made)
                type: string
              containerName:
                description: Name of the Container (if an attempt to start the Container
                  was made)
                type: string
              effectiveArgs:
                description: Effective values of launch arguments to be passed to
                  the Container, after all substitutions are applied.
                items:
                  type: string
                type: array
                x-kubernetes-list-type: atomic
              effectiveEnv:
                description: Effective values of environment variables, after all
                  substitutions are applied.
                items:
                  description: EnvVar represents an environment variable present in
                    a Container or Executable.
                  properties:
                    name:
                      description: Name of the environment variable
                      type: string
                    value:
                      description: Value of the environment variable. Defaults to
                        "" (empty string).
                      type: string
                  required:
                  - name
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              exitCode:
                default: -1
                description: |-
                  Exit code of the Container.
                  Default is -1, meaning the exit code is not known, or the container is still running.
                format: int32
                type: integer
              finishTimestamp:
                description: Timestamp when the Container was terminated last
                format: date-time
                type: string
              message:
                description: A human-readable message that provides additional information
                  about Container state.
                type: string
              networks:
                description: List of ContainerNetworks the Container is connected
                  to
                items:
                  type: string
                type: array
              startupTimestamp:
                description: Timestamp of the Container start attempt
                format: date-time
                type: string
              state:
                default: Pending
                description: Current state of the Container.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
